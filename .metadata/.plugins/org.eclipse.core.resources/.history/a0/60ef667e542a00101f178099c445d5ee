<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head>
    <title>QnA</title>
    <style>
        /* 모달 스타일 */
        #writeModal {
            display: none;
            position: fixed;
            top: 20%;
            left: 30%;
            width: 40%;
            background-color: white;
            border: 1px solid #aaa;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 1000;
            border-radius: 10px;
        }

        #writeModalClose {
            margin-top: 15px;
        }

        .write-link {
            color: #007bff;
            text-decoration: underline;
            cursor: pointer;
        }

        .write-link:hover {
            color: #0056b3;
        }
    </style>
</head>
<body>

<%-- 기존 코드: QnA 목록 테이블 --%>
<table>
    <tr>
        <th>제목</th>
        <th>작성자</th>
        <th>날짜</th>
        <th>내용</th>
    </tr>

    <c:forEach var="qna" items="${qnaList}">
        <tr>
            <td>${qna.title}</td>
            <td>${qna.writer}</td>
            <td>${qna.regDate}</td>
            <td>
                <!-- a 태그로 변경 -->
                <a href="javascript:void(0);" class="write-link" data-content="${qna.content}" onclick="showWritePopup(this)">Write</a>
            </td>
        </tr>
    </c:forEach>
</table>

<%-- 모달 팝업 창 --%>
<div id="writeModal">
    <div id="writeContent">내용을 불러오는 중...</div>
    <button id="writeModalClose" onclick="closeWritePopup()">닫기</button>
</div>

<%-- 자바스크립트 부분 --%>
<script>
function showWritePopup(link) {
    const content = link.getAttribute('data-content');
    document.getElementById('writeContent').innerText = content;
    document.getElementById('writeModal').style.display = 'block';
}

function closeWritePopup() {
    document.getElementById('writeModal').style.display = 'none';
}
</script>

</body>
</html>
