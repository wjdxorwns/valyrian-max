package com.ict.project.controller;


import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

import com.ict.project.service.QnaService;
import com.ict.project.vo.personnel.QnaVO;

import java.util.List;

@Controller
public class QnaController {

    @Autowired
    private QnaService qnaService;

    // QnA 목록 조회
    @GetMapping("/qna")
    public String listQna(Model model) {
        List<QnaVO> qnaList = qnaService.getAllQna();
        model.addAttribute("qnaList", qnaList);
        return "Qna"; // Qna.jsp로 매핑
    }

    // QnA 상세 보기
    @GetMapping("/qna/view")
    public String viewQna(@RequestParam("id") Long answerId, Model model) {
        QnaVO qna = qnaService.getQnaById(answerId);
        model.addAttribute("q", qna);
        return "qnaDetail"; // qnaDetail.jsp로 매핑
    }
    

    // 질문 작성/수정 폼 표시
    @GetMapping("/qnaWrite")
    public String showWriteForm(@RequestParam(value = "answer_id", required = false) Long answerId, Model model) {
        if (answerId != null) {
            QnaVO qna = qnaService.getQnaById(answerId);
            model.addAttribute("q", qna);
        } else {
            model.addAttribute("q", new QnaVO());
        }
        return "qnaWrite"; // qnaWrite.jsp로 매핑
    }

	/*
	 * // 새 질문 또는 수정된 질문 제출
	 * 
	 * @PostMapping("/submitQuestion") public String submitQuestion(@ModelAttribute
	 * QnaVO qna) { if (qna.getAnswerId() != null) { qnaService.updateQna(qna); }
	 * else { qnaService.createQna(qna); } return "redirect:/qna"; // QnA 목록으로 리다이렉트
	 * }
	 */
}