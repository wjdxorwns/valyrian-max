<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="man">


<select id="resignList" resultType="Map">
select * 
from Employee e
join users u on u.user_idx= e.user_idx
where u.remove = 0;
</select>

<select id="keyword" parameterType="map" resultType="map">
    SELECT *
    FROM Employee e
    JOIN users u ON u.user_idx = e.user_idx
    WHERE
   <choose>
    <when test="searchType == 'emp_id'">
        e.emp_id LIKE #{keyword} AND u.remove = 0
    </when>
    <when test="searchType == 'emp_name'">
        u.emp_name LIKE #{keyword} AND u.remove = 0
    </when>
    <when test="searchType == 'team'">
        e.team LIKE #{keyword} AND u.remove = 0
    </when>
    <when test="searchType == 'position'">
        e.position LIKE #{keyword} AND u.remove = 0
    </when>
    <when test="searchType == 'quitter'">
        e.quitter = #{keyword}
    </when>
    <otherwise>
        1=1
    </otherwise>
</choose>
</select>

<update id="update" parameterType="map">
 UPDATE Employee
 SET quitter = #{quitter}
 WHERE emp_id = #{emp_id}



</update>


</mapper>















