<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="qna">

	<select id="allqna" resultType="java.util.Map">
		SELECT *
		FROM question
		ORDER BY question_date DESC
	</select>


	<select id="empidxlist" parameterType="string" resultType="map">
		SELECT *
		FROM question
		WHERE emp_idx = #{empIdx}
		ORDER BY question_date DESC
	</select>

	<select id="writefind" parameterType="string" resultType="map">
		SELECT u.emp_name,e.emp_idx
		FROM employee e
		inner JOIN users u ON e.user_idx = u.user_idx
		WHERE e.emp_idx = #{empIdx}
	</select>

	<insert id="insert" parameterType="map">
		insert into question (emp_idx,emp_name,question_title,question_details)
		value(#{emp_idx},#{emp_name},#{question_title},#{question_details})
	</insert>


	<select id="qnaDetail" parameterType="string"
		resultType="com.ict.project.vo.personnel.pFile.QuestionVO">
		SELECT *
		FROM question
		WHERE answer_id = #{answer_id}
	</select>

	<update id="update"
		parameterType="com.ict.project.vo.personnel.pFile.QuestionVO">
		update question
		set
		question_title= #{question_title}
		emp_name= #{emp_name}
		question_date= #{question_date}
		question_details= #{question_details}
		answer_comment= #{answer_comment}
		answer_status= #{answer_status}
		where #{answer_id}
	</update>

</mapper>